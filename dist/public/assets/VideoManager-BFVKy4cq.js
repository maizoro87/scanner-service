import{r as Ce,u as Ae,j as e,a9 as he,K as Re,M as Te,O as Se,Q as De,V as h,C as r,e as n,f as i,aT as Be,a as t,ad as oe,a5 as me,z as je,aO as ke,aU as He,aV as Ke,aW as d,aX as x,h as ue,W as Le,i as c,aM as Ie,Y as Pe,aN as Qe,ab as Ve}from"./index-Cj9AK73v.js";import{a as Fe}from"./api-DJ2ai4R4.js";import{R as j,B as Ue,C as ge,X as pe,Y as Ne,T as u,L as ve,a as fe,A as Ee,P as Oe,b as Ye,c as Me,d as qe,e as Ge}from"./AreaChart-BfuJoKPf.js";import"./index-1H0KxRnw.js";function ze(){var p,N,v,f,b,w,y,C,A,R,T,S,D,B,k,H,K,L,I,P,Q,V,F,U,E,O,Y,M,q,G,J,W,X,$,z,Z,_,ee,se,ae,re,te,le,ne,ie,ce,de,xe;const[o,be]=Ce.useState("7d"),{data:s,isLoading:we,error:ye}=Ae({queryKey:["/api/admin/analytics",o],queryFn:()=>Fe(`/api/admin/analytics?range=${o}`,"GET"),refetchInterval:3e4});if(we)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(ye||!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Failed to load analytics"}),e.jsx("p",{className:"text-gray-600",children:"Please try again later"})]});const g=["#1A4784","#B4A365","#4CAF50","#FF6B6B","#4ECDC4","#45B7D1"],m=a=>Array.isArray(a)?a.length>0:typeof a=="object"?Object.keys(a).length>0:a!=null&&a!==0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Analytics Dashboard"}),e.jsxs(Re,{value:o,onValueChange:be,children:[e.jsx(Te,{className:"w-40",children:e.jsx(Se,{})}),e.jsxs(De,{children:[e.jsx(h,{value:"24h",children:"Last 24 Hours"}),e.jsx(h,{value:"7d",children:"Last 7 Days"}),e.jsx(h,{value:"30d",children:"Last 30 Days"}),e.jsx(h,{value:"90d",children:"Last 90 Days"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((p=s==null?void 0:s.overview)==null?void 0:p.activeUsers)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"AI Conversations"}),e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((N=s==null?void 0:s.ai)==null?void 0:N.totalConversations)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((v=s==null?void 0:s.ai)==null?void 0:v.helpfulRatio)||0,"% helpful"]})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Resource Downloads"}),e.jsx(me,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((b=(f=s==null?void 0:s.content)==null?void 0:f.resources)==null?void 0:b.downloads)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((y=(w=s==null?void 0:s.content)==null?void 0:w.resources)==null?void 0:y.views)||0," views"]})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Search CTR"}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((C=s==null?void 0:s.search)==null?void 0:C.clickThroughRate)||0,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((A=s==null?void 0:s.search)==null?void 0:A.totalSearches)||0," searches"]})]})]}),e.jsxs(r,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(i,{className:"text-sm font-medium",children:"Avg Session"}),e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(t,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.floor((((R=s==null?void 0:s.overview)==null?void 0:R.avgSessionDuration)||0)/60),"m"," ",(((T=s==null?void 0:s.overview)==null?void 0:T.avgSessionDuration)||0)%60,"s"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((S=s==null?void 0:s.overview)==null?void 0:S.bounceRate)||0,"% bounce rate"]})]})]})]}),e.jsxs(He,{defaultValue:"content",className:"space-y-4",children:[e.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[e.jsx(d,{value:"content",children:"Content"}),e.jsx(d,{value:"search",children:"Search"}),e.jsx(d,{value:"engagement",children:"Engagement"}),e.jsx(d,{value:"external",children:"External"}),e.jsx(d,{value:"ai",children:"AI Assistant"})]}),e.jsx(x,{value:"content",className:"space-y-4",children:m(s==null?void 0:s.content)?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Content Performance"})}),e.jsx(t,{children:e.jsx(j,{width:"100%",height:300,children:e.jsxs(Ue,{data:[{name:"Posts",views:((B=(D=s==null?void 0:s.content)==null?void 0:D.posts)==null?void 0:B.views)||0,engagement:((H=(k=s==null?void 0:s.content)==null?void 0:k.posts)==null?void 0:H.shares)||0},{name:"Resources",views:((L=(K=s==null?void 0:s.content)==null?void 0:K.resources)==null?void 0:L.views)||0,engagement:((P=(I=s==null?void 0:s.content)==null?void 0:I.resources)==null?void 0:P.downloads)||0},{name:"Tools",views:((V=(Q=s==null?void 0:s.content)==null?void 0:Q.tools)==null?void 0:V.clicks)||0,engagement:((U=(F=s==null?void 0:s.content)==null?void 0:F.tools)==null?void 0:U.searches)||0}],children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"name"}),e.jsx(Ne,{}),e.jsx(u,{}),e.jsx(ve,{}),e.jsx(fe,{dataKey:"views",fill:"#1A4784"}),e.jsx(fe,{dataKey:"engagement",fill:"#B4A365"})]})})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Most Viewed Content"})}),e.jsx(t,{children:((O=(E=s==null?void 0:s.engagement)==null?void 0:E.mostViewedContent)==null?void 0:O.length)>0?e.jsx("div",{className:"space-y-3",children:s.engagement.mostViewedContent.slice(0,5).map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a.type==="post"&&e.jsx(ue,{className:"h-4 w-4"}),a.type==="resource"&&e.jsx(me,{className:"h-4 w-4"}),a.type==="tool"&&e.jsx(Le,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm truncate max-w-[200px]",children:a.title})]}),e.jsx(c,{children:a.views})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No content data available"})})]})]}):e.jsx(r,{children:e.jsxs(t,{className:"text-center py-12",children:[e.jsx(ue,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{children:"No content data available for this time period"})]})})}),e.jsx(x,{value:"search",className:"space-y-4",children:m((Y=s==null?void 0:s.search)==null?void 0:Y.topSearches)?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Top Search Terms"})}),e.jsx(t,{children:e.jsx("div",{className:"space-y-3",children:(q=(M=s==null?void 0:s.search)==null?void 0:M.topSearches)==null?void 0:q.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:a.term}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",children:a.count}),e.jsxs(c,{variant:a.ctr>50?"default":"secondary",children:[a.ctr,"% CTR"]})]})]},l))})})]}),((J=(G=s==null?void 0:s.search)==null?void 0:G.noResultsQueries)==null?void 0:J.length)>0&&e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-yellow-500"}),"Queries with No Results"]})}),e.jsx(t,{children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.search.noResultsQueries.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-50 rounded",children:[e.jsx("span",{className:"text-sm",children:a.term}),e.jsx(c,{variant:"outline",children:a.count})]},l))})})]})]}):e.jsx(r,{children:e.jsxs(t,{className:"text-center py-12",children:[e.jsx(je,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{children:"No search data available for this time period"})]})})}),e.jsx(x,{value:"engagement",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"User Journey"})}),e.jsx(t,{children:((X=(W=s==null?void 0:s.engagement)==null?void 0:W.userJourney)==null?void 0:X.length)>0?e.jsx("div",{className:"space-y-3",children:s.engagement.userJourney.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:a.page})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a.visits," visits â€¢ ",a.avgTime,"s avg"]})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No user journey data available"})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Device Breakdown"})}),e.jsx(t,{children:((z=($=s==null?void 0:s.engagement)==null?void 0:$.deviceBreakdown)==null?void 0:z.length)>0?e.jsx(j,{width:"100%",height:200,children:e.jsxs(Oe,{children:[e.jsx(Ye,{data:s.engagement.deviceBreakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"sessions",nameKey:"device",children:s.engagement.deviceBreakdown.map((a,l)=>e.jsx(Me,{fill:g[l%g.length]},`cell-${l}`))}),e.jsx(u,{}),e.jsx(ve,{})]})}):e.jsx("p",{className:"text-center text-gray-500",children:"No device data available"})})]})]})}),e.jsx(x,{value:"external",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"RSS Feed Health"]})}),e.jsx(t,{children:((_=(Z=s==null?void 0:s.rss)==null?void 0:Z.feedHealth)==null?void 0:_.length)>0?e.jsx("div",{className:"space-y-3",children:s.rss.feedHealth.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.articles," articles"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:a.status==="healthy"?"default":a.status==="error"?"destructive":"secondary",children:a.status}),a.errors>0&&e.jsxs(c,{variant:"outline",children:[a.errors," errors"]})]})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No RSS feeds configured"})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5"}),"YouTube Channels"]})}),e.jsx(t,{children:((se=(ee=s==null?void 0:s.youtube)==null?void 0:ee.channelHealth)==null?void 0:se.length)>0?e.jsx("div",{className:"space-y-3",children:s.youtube.channelHealth.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.videos," videos â€¢ ",a.subscribers," subscribers"]})]}),e.jsx(c,{variant:a.status==="healthy"?"default":"secondary",children:a.status})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No YouTube channels configured"})})]})]})}),e.jsx(x,{value:"ai",className:"space-y-4",children:m(s==null?void 0:s.ai)?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"AI Usage by Hour"})}),e.jsx(t,{children:((re=(ae=s==null?void 0:s.ai)==null?void 0:ae.usageByHour)==null?void 0:re.length)>0?e.jsx(j,{width:"100%",height:300,children:e.jsxs(qe,{data:s.ai.usageByHour,children:[e.jsx(ge,{strokeDasharray:"3 3"}),e.jsx(pe,{dataKey:"hour"}),e.jsx(Ne,{}),e.jsx(u,{}),e.jsx(Ge,{type:"monotone",dataKey:"count",stroke:"#1A4784",fill:"#1A4784",fillOpacity:.6})]})}):e.jsx("p",{className:"text-center text-gray-500",children:"No hourly usage data available"})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Top AI Queries"})}),e.jsx(t,{children:((le=(te=s==null?void 0:s.ai)==null?void 0:te.topQueries)==null?void 0:le.length)>0?e.jsx("div",{className:"space-y-3",children:s.ai.topQueries.slice(0,5).map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm truncate max-w-[250px]",children:a.query}),e.jsx(c,{children:a.count})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No AI query data available"})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Context Distribution"})}),e.jsx(t,{children:((ie=(ne=s==null?void 0:s.ai)==null?void 0:ne.contextDistribution)==null?void 0:ie.length)>0?e.jsx("div",{className:"space-y-3",children:s.ai.contextDistribution.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:a.context||"Unknown"})]}),e.jsx(c,{children:a.count})]},l))}):e.jsx("p",{className:"text-center text-gray-500",children:"No context data available"})})]}),e.jsxs(r,{children:[e.jsx(n,{children:e.jsx(i,{children:"Response Performance"})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Response Time"}),e.jsxs(c,{variant:"outline",children:[((ce=s==null?void 0:s.ai)==null?void 0:ce.avgResponseTime)||0,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Helpful Responses"}),e.jsxs(c,{variant:"default",children:[((de=s==null?void 0:s.ai)==null?void 0:de.helpfulRatio)||0,"%"]})]}),e.jsx(Ve,{value:((xe=s==null?void 0:s.ai)==null?void 0:xe.helpfulRatio)||0,className:"h-2"})]})})]})]}):e.jsx(r,{children:e.jsxs(t,{className:"text-center py-12",children:[e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{children:"No AI assistant data available for this time period"})]})})})]})]})}export{ze as default};
