import{b as L,y as P,j as e,I as S,K as E,M as F,O as Y,Q as A,V as D,a4 as M,B as i,J as T,r as b,u as Q,m as R,z as H,P as k,C as N,e as q,a as C,Y as I,f as $,i as w,k as J,l as U,aL as _,g as G,af as W,aO as X,aa as Z,a9 as ee,q as se}from"./index-Cj9AK73v.js";import{S as ae}from"./sidebar-C6JNkD9n.js";import{u as te,F as re,a as d,b as u,c as x,d as h,e as y,z as c,t as ne}from"./form-XBVBBCWe.js";import{D as le,a as ce,b as ie,c as oe}from"./dialog-CYYKERfK.js";import{T as de}from"./textarea-srwHGf3m.js";import{C as ue}from"./circle-x-Bs4zksKh.js";import"./api-DJ2ai4R4.js";import"./chart-column-BI2syFgd.js";import"./label-Dfr3Tkin.js";const xe=c.object({name:c.string().min(1,"Name is required"),channelId:c.string().min(1,"Channel ID is required"),description:c.string().optional(),category:c.string().min(1,"Category is required"),isActive:c.boolean().default(!0),fetchFrequency:c.number().min(1).max(168).default(24)});function he({open:o,onOpenChange:m}){const{toast:n}=L(),t=te({resolver:ne(xe),defaultValues:{name:"",channelId:"",description:"",category:"",isActive:!0,fetchFrequency:24}}),j=P({mutationFn:async a=>{const r=await fetch("/api/youtube-channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw new Error("Failed to create YouTube channel");return r.json()},onSuccess:()=>{T.invalidateQueries({queryKey:["/api/youtube-channels"]}),T.invalidateQueries({queryKey:["/api/dashboard/stats"]}),n({title:"Success",description:"YouTube channel created successfully"}),m(!1),t.reset()},onError:a=>{n({title:"Error",description:"Failed to create YouTube channel",variant:"destructive"})}}),g=a=>{j.mutate(a)},p=["Educational Content","STEM Education","Teaching Resources","Professional Development","K-12 Education","Higher Education","Special Education","Technology Integration","Subject-Specific","EdTech Reviews","Student Projects","Other"],f=[{value:1,label:"Every hour"},{value:6,label:"Every 6 hours"},{value:12,label:"Every 12 hours"},{value:24,label:"Daily"},{value:48,label:"Every 2 days"},{value:72,label:"Every 3 days"},{value:168,label:"Weekly"}];return e.jsx(le,{open:o,onOpenChange:m,children:e.jsxs(ce,{className:"max-w-xl",children:[e.jsx(ie,{children:e.jsx(oe,{children:"Add New YouTube Channel"})}),e.jsx(re,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(g),className:"space-y-6",children:[e.jsx(d,{control:t.control,name:"name",render:({field:a})=>e.jsxs(u,{children:[e.jsx(x,{children:"Channel Name"}),e.jsx(h,{children:e.jsx(S,{placeholder:"e.g., Khan Academy",...a})}),e.jsx(y,{})]})}),e.jsx(d,{control:t.control,name:"channelId",render:({field:a})=>e.jsxs(u,{children:[e.jsx(x,{children:"YouTube Channel ID"}),e.jsx(h,{children:e.jsx(S,{placeholder:"e.g., UC4a-Gbdw7vOaccHmFo40b9g",...a})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Find this in the channel URL or YouTube Studio"}),e.jsx(y,{})]})}),e.jsx(d,{control:t.control,name:"description",render:({field:a})=>e.jsxs(u,{children:[e.jsx(x,{children:"Description (Optional)"}),e.jsx(h,{children:e.jsx(de,{placeholder:"Brief description of what this channel offers...",className:"min-h-[80px]",...a})}),e.jsx(y,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(d,{control:t.control,name:"category",render:({field:a})=>e.jsxs(u,{children:[e.jsx(x,{children:"Category"}),e.jsxs(E,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(h,{children:e.jsx(F,{children:e.jsx(Y,{placeholder:"Select category"})})}),e.jsx(A,{children:p.map(r=>e.jsx(D,{value:r,children:r},r))})]}),e.jsx(y,{})]})}),e.jsx(d,{control:t.control,name:"fetchFrequency",render:({field:a})=>{var r;return e.jsxs(u,{children:[e.jsx(x,{children:"Check for New Videos"}),e.jsxs(E,{onValueChange:l=>a.onChange(parseInt(l)),defaultValue:(r=a.value)==null?void 0:r.toString(),children:[e.jsx(h,{children:e.jsx(F,{children:e.jsx(Y,{placeholder:"Select frequency"})})}),e.jsx(A,{children:f.map(l=>e.jsx(D,{value:l.value.toString(),children:l.label},l.value))})]}),e.jsx(y,{})]})}})]}),e.jsx(d,{control:t.control,name:"isActive",render:({field:a})=>e.jsxs(u,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(h,{children:e.jsx(M,{checked:a.value,onCheckedChange:a.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(x,{children:"Active Channel"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start monitoring this channel for new videos immediately"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(i,{type:"submit",disabled:j.isPending,children:j.isPending?"Creating...":"Create Channel"})]})]})})]})})}function Ce(){const[o,m]=b.useState(""),[n,t]=b.useState(""),[j,g]=b.useState(!1),{toast:p}=L(),{data:f=[],isLoading:a}=Q({queryKey:["/api/youtube-channels"]}),r=P({mutationFn:async s=>{if(!(await fetch(`/api/youtube-channels/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete YouTube channel")},onSuccess:()=>{T.invalidateQueries({queryKey:["/api/youtube-channels"]}),p({title:"Success",description:"YouTube channel deleted successfully"})},onError:()=>{p({title:"Error",description:"Failed to delete YouTube channel",variant:"destructive"})}}),l=f.filter(s=>{var v;return(s.name.toLowerCase().includes(o.toLowerCase())||((v=s.description)==null?void 0:v.toLowerCase().includes(o.toLowerCase())))&&(n===""||n==="active"&&s.isActive||n==="inactive"&&!s.isActive)}),V=s=>{p({title:"Edit YouTube Channel",description:"Edit functionality will be implemented soon",variant:"default"})},K=s=>{confirm(`Are you sure you want to delete "${s.name}"?`)&&r.mutate(s.id)},O=s=>{if(!s.isActive)return e.jsx(ue,{className:"w-4 h-4 text-gray-500"});switch(s.lastStatus){case"success":return e.jsx(se,{className:"w-4 h-4 text-green-500"});case"error":return e.jsx(ee,{className:"w-4 h-4 text-red-500"});case"fetching":return e.jsx(Z,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(X,{className:"w-4 h-4 text-yellow-500"})}},z=s=>{if(!s.isActive)return"Inactive";switch(s.lastStatus){case"success":return"Active";case"error":return"Error";case"fetching":return"Fetching";default:return"Pending"}},B=s=>{if(!s.isActive)return"bg-gray-100 text-gray-800";switch(s.lastStatus){case"success":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"fetching":return"bg-blue-100 text-blue-800";default:return"bg-yellow-100 text-yellow-800"}};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(ae,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(R,{title:"YouTube Channels",breadcrumb:"Content Management / YouTube Channels"}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx(S,{placeholder:"Search YouTube channels...",value:o,onChange:s=>m(s.target.value),className:"pl-10"})]}),e.jsxs("select",{value:n,onChange:s=>t(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md bg-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs(i,{onClick:()=>g(!0),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add YouTube Channel"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?Array.from({length:6}).map((s,v)=>e.jsxs(N,{className:"animate-pulse",children:[e.jsxs(q,{className:"pb-3",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})})]},v)):l.length===0?e.jsx("div",{className:"col-span-full",children:e.jsx(N,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(I,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg text-gray-500",children:o||n?"No YouTube channels found matching your filters":"No YouTube channels added yet"}),e.jsxs(i,{onClick:()=>g(!0),className:"mt-4",variant:"outline",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Your First YouTube Channel"]})]})})}):l.map(s=>e.jsxs(N,{className:"hover:shadow-md transition-shadow",children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(I,{className:"w-4 h-4 text-red-500"}),e.jsx($,{className:"text-lg line-clamp-1",children:s.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:B(s),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[O(s),e.jsx("span",{children:z(s)})]})}),e.jsx(w,{variant:"outline",className:"text-xs",children:s.category})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>V(),className:"h-8 w-8 p-0",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>K(s),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(U,{className:"w-4 h-4"})})]})]})}),e.jsxs(C,{children:[s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Channel ID"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-3 h-3 text-gray-400"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded truncate",children:s.channelId})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Fetch Frequency"}),e.jsxs(w,{variant:"secondary",className:"text-xs",children:["Every ",s.fetchFrequency," hours"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:s.lastFetchedAt?`Last: ${G(new Date(s.lastFetchedAt),{addSuffix:!0})}`:"Never fetched"}),e.jsx(i,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:`https://youtube.com/channel/${s.channelId}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Visit"]})})]})]})]},s.id))})]})})]}),e.jsx(he,{open:j,onOpenChange:g})]})}export{Ce as default};
